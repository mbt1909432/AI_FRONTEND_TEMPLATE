# ğŸš€ Chat-to-Agent é¡¹ç›® CI/CD é…ç½®è¯´æ˜

## ğŸ“‹ é¡¹ç›®åˆ†æç»“æœ

ä½ çš„é¡¹ç›®æ˜¯ä¸€ä¸ª**çº¯å‰ç«¯ React åº”ç”¨**ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

- **æ¡†æ¶**: React 18.2.0
- **æ„å»ºå·¥å…·**: react-scripts (Create React App)
- **éƒ¨ç½²æ–¹å¼**: Docker (Node.js æ„å»º + Nginx æœåŠ¡)
- **ç«¯å£**: 1923
- **é•œåƒä»“åº“**: GitHub Container Registry (GHCR)

## âœ… å·²å®Œæˆçš„ä¿®æ”¹

### 1. GitHub Actions Workflow

**æ–‡ä»¶**: `.github/workflows/action_for_deployment.yml`

**ä¸»è¦æ”¹åŠ¨**:
```yaml
- ç§»é™¤äº†ä¸å­˜åœ¨çš„ backend æ„å»º
- ç§»é™¤äº† deployment æ–‡ä»¶å¤¹ä¾èµ–
- ç®€åŒ–ä¸ºå•ä¸€å‰ç«¯åº”ç”¨éƒ¨ç½²æµç¨‹
- æ·»åŠ æ‰‹åŠ¨è§¦å‘åŠŸèƒ½
- ä½¿ç”¨ GHCR ä½œä¸ºé•œåƒä»“åº“
- è‡ªåŠ¨æ¸…ç†æ—§é•œåƒ
```

**å·¥ä½œæµç¨‹**:
1. ä»£ç æ£€å‡º
2. é…ç½® SSH å¯†é’¥
3. ç™»å½• GHCR
4. æ„å»ºå¹¶æ¨é€ Docker é•œåƒ
5. SSH è¿æ¥æœåŠ¡å™¨éƒ¨ç½²
6. è‡ªåŠ¨æ¸…ç†æ—§é•œåƒ

### 2. Docker é…ç½®æ–‡ä»¶

#### `docker-compose.yml` (å·²ä¿®æ”¹)
```yaml
# ä»æœ¬åœ°æ„å»ºæ”¹ä¸ºä½¿ç”¨ GHCR é•œåƒ
image: ghcr.io/${GIT_USER}/chat-to-agent:latest
```

#### `docker-compose.prod.yml` (æ–°å¢)
```yaml
# ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–é…ç½®
- å¥åº·æ£€æŸ¥
- æ—¥å¿—è½®è½¬
- è‡ªåŠ¨é‡å¯
```

### 3. æ–°å¢æ–‡æ¡£

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| `DEPLOYMENT_GUIDE.md` | å®Œæ•´çš„éƒ¨ç½²æŒ‡å—ï¼ˆ20+ é¡µï¼‰ |
| `DEPLOYMENT_CHECKLIST.md` | å¿«é€Ÿé…ç½®æ¸…å• |
| `DEPLOYMENT_SUMMARY.md` | é…ç½®æ€»ç»“ |
| `é…ç½®è¯´æ˜.md` | æœ¬æ–‡ä»¶ - ä¸­æ–‡é…ç½®è¯´æ˜ |

### 4. æ–°å¢è„šæœ¬

| è„šæœ¬ | ç”¨é€” |
|------|------|
| `server-setup.sh` | æœåŠ¡å™¨è‡ªåŠ¨é…ç½®è„šæœ¬ |
| `local-test.sh` | æœ¬åœ° Docker æµ‹è¯•è„šæœ¬ |

### 5. æ›´æ–°ç°æœ‰æ–‡æ¡£

- âœ… `README.md` - æ·»åŠ  CI/CD éƒ¨ç½²è¯´æ˜

## ğŸ”§ é…ç½®æ­¥éª¤

### æ­¥éª¤ 1: é…ç½® GitHub Secrets

è¿›å…¥: `GitHub ä»“åº“` â†’ `Settings` â†’ `Secrets and variables` â†’ `Actions`

éœ€è¦é…ç½® 4 ä¸ª Secrets:

| Secret åç§° | è¯´æ˜ | å¦‚ä½•è·å– |
|-------------|------|----------|
| `GIT_USER` | GitHub ç”¨æˆ·å | ä½ çš„ç”¨æˆ·å |
| `GIT_TOKEN` | GitHub Token | [åˆ›å»º Token](#åˆ›å»º-github-token) |
| `HOST_NAME` | æœåŠ¡å™¨åœ°å€ | æœåŠ¡å™¨ IP æˆ–åŸŸå |
| `DEPLOY_SSH_KEY` | SSH ç§é’¥ | [ç”Ÿæˆ SSH å¯†é’¥](#ç”Ÿæˆ-ssh-å¯†é’¥) |

#### åˆ›å»º GitHub Token

1. è®¿é—®: https://github.com/settings/tokens
2. ç‚¹å‡» **"Generate new token"** â†’ **"Generate new token (classic)"**
3. è®¾ç½®åç§°: `chat-to-agent-deploy`
4. é€‰æ‹©æƒé™:
   - âœ… `write:packages` - æ¨é€é•œåƒ
   - âœ… `read:packages` - æ‹‰å–é•œåƒ
   - âœ… `delete:packages` - åˆ é™¤æ—§é•œåƒï¼ˆå¯é€‰ï¼‰
5. ç‚¹å‡» **"Generate token"**
6. **å¤åˆ¶ Token**ï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼ï¼‰

#### ç”Ÿæˆ SSH å¯†é’¥

**åœ¨æœ¬åœ°ç”µè„‘è¿è¡Œ**:

```bash
# ç”Ÿæˆ ED25519 å¯†é’¥ï¼ˆæ›´å®‰å…¨ï¼‰
ssh-keygen -t ed25519 -C "github-actions-deploy" -f ~/.ssh/deploy_key

# æŸ¥çœ‹ç§é’¥ï¼ˆå¤åˆ¶åˆ° GitHub Secret: DEPLOY_SSH_KEYï¼‰
cat ~/.ssh/deploy_key

# æŸ¥çœ‹å…¬é’¥ï¼ˆæ·»åŠ åˆ°æœåŠ¡å™¨ï¼‰
cat ~/.ssh/deploy_key.pub
```

**ç§é’¥æ ¼å¼ç¤ºä¾‹**:
```
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
...
-----END OPENSSH PRIVATE KEY-----
```

### æ­¥éª¤ 2: é…ç½®æœåŠ¡å™¨

#### æ–¹å¼ A: ä½¿ç”¨è‡ªåŠ¨é…ç½®è„šæœ¬ï¼ˆæ¨èï¼‰

**å°†è„šæœ¬ä¸Šä¼ åˆ°æœåŠ¡å™¨**:
```bash
# åœ¨æœ¬åœ°
scp server-setup.sh root@your-server-ip:~
```

**åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ**:
```bash
ssh root@your-server-ip
chmod +x server-setup.sh
./server-setup.sh
```

è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆ:
- âœ… æ›´æ–°ç³»ç»Ÿ
- âœ… å®‰è£… Docker
- âœ… é…ç½®é˜²ç«å¢™
- âœ… åˆ›å»ºå·¥ä½œç›®å½•
- âœ… é…ç½®ç¯å¢ƒå˜é‡
- âœ… ç™»å½• GHCR

#### æ–¹å¼ B: æ‰‹åŠ¨é…ç½®

**1. æ·»åŠ  SSH å…¬é’¥åˆ°æœåŠ¡å™¨**:
```bash
# SSH ç™»å½•æœåŠ¡å™¨
ssh root@your-server-ip

# æ·»åŠ å…¬é’¥
mkdir -p ~/.ssh
echo "ä½ çš„å…¬é’¥å†…å®¹" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys
chmod 700 ~/.ssh
```

**2. å®‰è£… Docker**:
```bash
# Ubuntu/Debian
curl -fsSL https://get.docker.com | sh
systemctl start docker
systemctl enable docker

# éªŒè¯å®‰è£…
docker --version
docker compose version
```

**3. é…ç½®ç¯å¢ƒå˜é‡**:
```bash
# åˆ›å»ºå·¥ä½œç›®å½•
mkdir -p ~/chat-to-agent
cd ~/chat-to-agent

# è®¾ç½® GIT_USERï¼ˆé‡è¦ï¼ï¼‰
export GIT_USER=ä½ çš„GitHubç”¨æˆ·å
echo "export GIT_USER=ä½ çš„GitHubç”¨æˆ·å" >> ~/.bashrc
source ~/.bashrc
```

**4. ç™»å½• GHCR**:
```bash
echo YOUR_GITHUB_TOKEN | docker login ghcr.io -u YOUR_USERNAME --password-stdin
```

**5. é…ç½®é˜²ç«å¢™**:
```bash
# å¼€æ”¾å¿…è¦ç«¯å£
ufw allow 22/tcp    # SSH
ufw allow 1923/tcp  # åº”ç”¨ç«¯å£
ufw enable
```

### æ­¥éª¤ 3: ä¿®æ”¹ä»£ç ï¼ˆé‡è¦ï¼ï¼‰

**ä¿®æ”¹ `docker-compose.yml`**:

æ‰¾åˆ°è¿™ä¸€è¡Œ:
```yaml
image: ghcr.io/${GIT_USER:-your-github-username}/chat-to-agent:latest
```

å°† `your-github-username` æ”¹ä¸ºä½ çš„**å®é™… GitHub ç”¨æˆ·å**ï¼Œä¾‹å¦‚:
```yaml
image: ghcr.io/${GIT_USER:-zhangsan}/chat-to-agent:latest
```

> ğŸ’¡ **æç¤º**: ä½¿ç”¨ç¯å¢ƒå˜é‡ `${GIT_USER}` å¯ä»¥é¿å…ç¡¬ç¼–ç 

### æ­¥éª¤ 4: æäº¤å¹¶æ¨é€ä»£ç 

```bash
git add .
git commit -m "chore: setup CI/CD deployment"
git push origin main
```

### æ­¥éª¤ 5: æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€

#### åœ¨ GitHub ä¸Š:
1. è¿›å…¥ä»“åº“
2. ç‚¹å‡» **"Actions"** æ ‡ç­¾
3. æŸ¥çœ‹æœ€æ–°çš„ workflow è¿è¡ŒçŠ¶æ€
4. ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

#### åœ¨æœåŠ¡å™¨ä¸Š:
```bash
# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker ps | grep chat-to-agent

# æŸ¥çœ‹æ—¥å¿—
docker logs -f chat-to-agent

# æµ‹è¯•è®¿é—®
curl http://localhost:1923
```

### æ­¥éª¤ 6: è®¿é—®åº”ç”¨

åœ¨æµè§ˆå™¨ä¸­è®¿é—®:
```
http://your-server-ip:1923
```

## ğŸ§ª æœ¬åœ°æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

åœ¨æ¨é€åˆ° GitHub å‰ï¼Œå¯ä»¥å…ˆåœ¨æœ¬åœ°æµ‹è¯•:

```bash
chmod +x local-test.sh
./local-test.sh
```

è„šæœ¬ä¼š:
- æ„å»º Docker é•œåƒ
- å¯åŠ¨æµ‹è¯•å®¹å™¨
- æµ‹è¯•æœåŠ¡è¿æ¥
- æä¾›è®¿é—®åœ°å€

æµ‹è¯•æˆåŠŸåè®¿é—®: http://localhost:1923

## ğŸ“Š éƒ¨ç½²æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         å¼€å‘è€…                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ git push
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Actions                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ Checkout   â”‚â†’ â”‚   Build    â”‚â†’ â”‚  Push to   â”‚             â”‚
â”‚  â”‚   Code     â”‚  â”‚   Docker   â”‚  â”‚    GHCR    â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ SSH Deploy
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æœåŠ¡å™¨                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚   Pull     â”‚â†’ â”‚  Docker    â”‚â†’ â”‚  Service   â”‚             â”‚
â”‚  â”‚   Image    â”‚  â”‚  Compose   â”‚  â”‚   Live     â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                         â–¼                     â”‚
â”‚                                   Port: 1923                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·è®¿é—®                                â”‚
â”‚                http://server-ip:1923                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” å¸¸è§é—®é¢˜

### Q1: GitHub Actions æ„å»ºå¤±è´¥

**æ£€æŸ¥**:
- âœ… GitHub Secrets é…ç½®æ˜¯å¦æ­£ç¡®
- âœ… Token æƒé™æ˜¯å¦åŒ…å« `write:packages`
- âœ… SSH å¯†é’¥æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆåŒ…å«å¤´å°¾ï¼‰

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥çœ‹ Actions æ—¥å¿—
GitHub â†’ Actions â†’ ç‚¹å‡»å¤±è´¥çš„ workflow â†’ æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
```

### Q2: SSH è¿æ¥å¤±è´¥

**åŸå› **:
- SSH å¯†é’¥æœªæ·»åŠ åˆ°æœåŠ¡å™¨
- æœåŠ¡å™¨ SSH ç«¯å£è¢«é˜²ç«å¢™é˜»æ­¢
- known_hosts é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æµ‹è¯• SSH è¿æ¥
ssh -i ~/.ssh/deploy_key root@your-server-ip

# æ£€æŸ¥æœåŠ¡å™¨ SSH é…ç½®
cat /etc/ssh/sshd_config | grep PubkeyAuthentication
# åº”è¯¥æ˜¯: PubkeyAuthentication yes

# é‡å¯ SSH æœåŠ¡
systemctl restart sshd
```

### Q3: é•œåƒæ‹‰å–å¤±è´¥

**åŸå› **:
- æœªç™»å½• GHCR
- é•œåƒåç§°é”™è¯¯
- Token æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰‹åŠ¨ç™»å½•
echo YOUR_TOKEN | docker login ghcr.io -u YOUR_USERNAME --password-stdin

# æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨
# è®¿é—®: https://github.com/YOUR_USERNAME?tab=packages

# æ‰‹åŠ¨æ‹‰å–æµ‹è¯•
docker pull ghcr.io/YOUR_USERNAME/chat-to-agent:latest
```

### Q4: å®¹å™¨å¯åŠ¨å¤±è´¥

**æ£€æŸ¥**:
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker logs chat-to-agent

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
docker inspect chat-to-agent

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 1923
```

### Q5: è®¿é—®ä¸äº†åº”ç”¨

**æ£€æŸ¥æ¸…å•**:
- âœ… å®¹å™¨æ˜¯å¦è¿è¡Œ: `docker ps`
- âœ… ç«¯å£æ˜¯å¦å¼€æ”¾: `netstat -tlnp | grep 1923`
- âœ… é˜²ç«å¢™æ˜¯å¦å…è®¸: `ufw status`
- âœ… æœåŠ¡å™¨ IP æ˜¯å¦æ­£ç¡®

**æµ‹è¯•**:
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•
curl http://localhost:1923

# æ£€æŸ¥ Nginx æ—¥å¿—
docker logs chat-to-agent | grep error
```

## ğŸ”„ æ—¥å¸¸ä½¿ç”¨

### æ›´æ–°åº”ç”¨

**æ–¹å¼ 1: è‡ªåŠ¨éƒ¨ç½²ï¼ˆæ¨èï¼‰**
```bash
git add .
git commit -m "feat: new feature"
git push origin main
# GitHub Actions ä¼šè‡ªåŠ¨éƒ¨ç½²
```

**æ–¹å¼ 2: æ‰‹åŠ¨è§¦å‘**
```
GitHub â†’ Actions â†’ action_for_deployment.yml â†’ Run workflow
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æ—¥å¿—
docker logs -f chat-to-agent

# æœ€è¿‘ 100 è¡Œ
docker logs --tail 100 chat-to-agent

# å¸¦æ—¶é—´æˆ³
docker logs -t chat-to-agent
```

### é‡å¯æœåŠ¡

```bash
# æ–¹å¼ 1: é‡å¯å®¹å™¨
docker restart chat-to-agent

# æ–¹å¼ 2: ä½¿ç”¨ compose
cd ~/chat-to-agent
docker compose restart

# æ–¹å¼ 3: é‡æ–°éƒ¨ç½²
docker compose down
docker compose pull
docker compose up -d
```

### å›æ»šç‰ˆæœ¬

```bash
# æŸ¥çœ‹å¯ç”¨çš„é•œåƒç‰ˆæœ¬
# è®¿é—®: https://github.com/YOUR_USERNAME?tab=packages

# æ‹‰å–ç‰¹å®šç‰ˆæœ¬ï¼ˆä½¿ç”¨ commit SHAï¼‰
docker pull ghcr.io/YOUR_USERNAME/chat-to-agent:COMMIT_SHA

# ä¿®æ”¹ docker-compose.yml
# image: ghcr.io/YOUR_USERNAME/chat-to-agent:COMMIT_SHA

# é‡æ–°éƒ¨ç½²
docker compose up -d
```

## ğŸ“ˆ ç›‘æ§å’Œä¼˜åŒ–

### èµ„æºç›‘æ§

```bash
# å®æ—¶èµ„æºä½¿ç”¨
docker stats chat-to-agent

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
docker system df

# æŸ¥çœ‹é•œåƒå¤§å°
docker images | grep chat-to-agent
```

### æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ä½ç½®
docker inspect chat-to-agent | grep LogPath

# æ¸…ç†æ—¥å¿—ï¼ˆé‡å¯å®¹å™¨ï¼‰
docker compose restart
```

### æ€§èƒ½ä¼˜åŒ–

**1. å¯ç”¨ Gzip å‹ç¼©** (å·²åœ¨ nginx.conf é…ç½®)
```nginx
gzip on;
gzip_types text/plain text/css application/json application/javascript;
```

**2. é…ç½®ç¼“å­˜** (å·²åœ¨ nginx.conf é…ç½®)
```nginx
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
}
```

**3. ä½¿ç”¨ CDN** (å¯é€‰)
- Cloudflare
- AWS CloudFront
- é˜¿é‡Œäº‘ CDN

## ğŸŒ åŸŸåé…ç½®ï¼ˆå¯é€‰ï¼‰

### é…ç½® Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:1923;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### é…ç½® HTTPS

```bash
# å®‰è£… Certbot
apt install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
certbot renew --dry-run
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- ğŸ“‹ [DEPLOYMENT_GUIDE.md](./DEPLOYMENT_GUIDE.md) - è¯¦ç»†éƒ¨ç½²æŒ‡å—ï¼ˆè‹±æ–‡ï¼‰
- âœ… [DEPLOYMENT_CHECKLIST.md](./DEPLOYMENT_CHECKLIST.md) - å¿«é€Ÿé…ç½®æ¸…å•
- ğŸ“Š [DEPLOYMENT_SUMMARY.md](./DEPLOYMENT_SUMMARY.md) - é…ç½®æ€»ç»“
- ğŸ³ [DOCKER.md](./DOCKER.md) - Docker éƒ¨ç½²è¯´æ˜
- ğŸ“– [README.md](./README.md) - é¡¹ç›®ä»‹ç»

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®‰å…¨**:
   - âœ… ä½¿ç”¨å¼ºå¯†ç 
   - âœ… å®šæœŸæ›´æ–° Token
   - âœ… ä¸è¦å°†ç§é’¥æäº¤åˆ°ä»“åº“
   - âœ… é…ç½®é˜²ç«å¢™è§„åˆ™

2. **å¤‡ä»½**:
   - âœ… å¤‡ä»½ docker-compose.yml
   - âœ… å¤‡ä»½ç¯å¢ƒå˜é‡é…ç½®
   - âœ… å®šæœŸå¯¼å‡º Docker é•œåƒ

3. **ç›‘æ§**:
   - âœ… å®šæœŸæ£€æŸ¥æ—¥å¿—
   - âœ… ç›‘æ§èµ„æºä½¿ç”¨
   - âœ… è®¾ç½®å‘Šè­¦é€šçŸ¥

4. **æ›´æ–°**:
   - âœ… å®šæœŸæ›´æ–°ç³»ç»Ÿ
   - âœ… å®šæœŸæ›´æ–° Docker
   - âœ… åŠæ—¶æ›´æ–°ä¾èµ–åŒ…

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°é—®é¢˜:

1. **æŸ¥çœ‹æ—¥å¿—**:
   ```bash
   # GitHub Actions æ—¥å¿—
   GitHub â†’ Actions â†’ æŸ¥çœ‹å¤±è´¥çš„æ­¥éª¤
   
   # Docker æ—¥å¿—
   docker logs chat-to-agent
   
   # ç³»ç»Ÿæ—¥å¿—
   tail -f /var/log/syslog
   ```

2. **æ£€æŸ¥é…ç½®**:
   - GitHub Secrets æ˜¯å¦æ­£ç¡®
   - æœåŠ¡å™¨ç¯å¢ƒæ˜¯å¦é…ç½®å®Œæ•´
   - ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸

3. **å¸¸ç”¨è°ƒè¯•å‘½ä»¤**:
   ```bash
   # æµ‹è¯• SSH
   ssh -vvv root@your-server-ip
   
   # æµ‹è¯• Docker
   docker run hello-world
   
   # æµ‹è¯•ç½‘ç»œ
   curl -I http://localhost:1923
   
   # æŸ¥çœ‹è¿›ç¨‹
   ps aux | grep docker
   ```

## ğŸ‰ å®Œæˆï¼

é…ç½®å®Œæˆåï¼Œä½ çš„åº”ç”¨å°†å®ç°:
- âœ… è‡ªåŠ¨åŒ– CI/CD éƒ¨ç½²
- âœ… Git Push å³éƒ¨ç½²
- âœ… é›¶åœæœºæ›´æ–°
- âœ… è‡ªåŠ¨å¥åº·æ£€æŸ¥
- âœ… æ—¥å¿—ç®¡ç†
- âœ… å®¹å™¨åŒ–éƒ¨ç½²

---

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…ç›¸å…³æ–‡æ¡£æˆ–æäº¤ Issueã€‚** ğŸš€

